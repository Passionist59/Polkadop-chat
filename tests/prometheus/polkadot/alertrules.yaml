rule_files:
    - /dev/stdin

evaluation_interval: 1m

tests:
    - interval: 1m
      input_series:
          - series: 'polkadot_sub_libp2p_peers_count{job="polkadot", pod="polkadot-abcdef01234-abcdef"}'
            values: '3 2+0x4 1+0x9' # 3 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1
          - series: 'polkadot_sub_txpool_validations_scheduled{job="polkadot", pod="polkadot-abcdef01234-abcdef"}'
            values: '10+1x30' # 10 11 12 13 .. 40
          - series: 'polkadot_sub_txpool_validations_finished{job="polkadot", pod="polkadot-abcdef01234-abcdef"}'
            values: '0x30' # 0 0 0 0 .. 0
          - series: 'polkadot_block_height{status="best", job="polkadot", pod="polkadot-abcdef01234-abcdef"}'
            values: '1+1x3 4+0x13' # 1 2 3 4 4 4 4 4 4 4 4 4 ...
          - series: 'polkadot_block_height{status="finalized", job="polkadot", pod="polkadot-abcdef01234-abcdef"}'
            values: '1+1x3 4+0x13' # 1 2 3 4 4 4 4 4 4 4 4 4 ...
          - series: 'polkadot_cpu_usage_percentage{job="polkadot", pod="polkadot-abcdef01234-abcdef"}'
            values: '0+20x5 100+0x5' # 0 20 40 60 80 100 100 100 100 100 100

      alert_rule_test:
